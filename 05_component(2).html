<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8" name="viewport" content="width=device-width,initial-scale=1.0,user-scalable=no">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="renderer" content="webkit">
    <title>第五篇 组件(下)</title>
    <link rel="stylesheet" href="assets/css/bootstrap.css">
    <link rel="stylesheet" href="css/common.css">
</head>
<body>

<div class="container">
    <h1>第五篇 组件(下)</h1>
    <section id="app">
        <h3>父子组件传事件</h3>
        <app-main-view></app-main-view>
        <ul class="mySummary">
            <li>事件传递流程：
                <ul>
                    <li>点击“放大描述字号”按钮时，触发<code>onDescFontSizeClick</code>方法，此方法是查找一个注册过的事件<code>this.$root.$emit('descFontSizeAdd',
                        1)</code>并传参数1。
                    </li>
                    <li>子组件中注册过事件：<code>this.$root.$on('descFontSizeAdd', function (num) {
                        $this.fontSize += num;
                        })</code>接收参数并触发动作。
                    </li>
                </ul>
            </li>
            <li><code>$root</code>是为了取到当前DOM元素的Vue对象。</li>
            <li>注意触发事件<code>.$emit()</code>和注册事件<code>.$on()</code>前面的<strong>$</strong>符号</li>
        </ul>
    </section>
    <section id="app2">
        <h3>插槽简单演示</h3>
        <app2-main-view>
            <span>这是显示在插槽中的信息</span>
        </app2-main-view>
    </section>
    <section id="app3">
        <h3>插槽演示-Blog</h3>
        <app3-main-view>
            <h3 slot="title">{{blogData.title}}</h3>
            <span slot="time">{{blogData.time}}</span>
            <div>
                <p>{{blogData.desc}}</p>
            </div>
        </app3-main-view>
        <ul class="mySummary">
            <li>具名插槽：在组件中定义时写好name属性，页面使用时在slot属性里写定义时对应的name值。</li>
            <li>页面中用刀的数据应该写在new Vue时，而不能在定义组件时。组件里定义的数据只能在组件模板里访问。</li>
        </ul>
    </section>
    <section id="app4">
        <h3>动态组件</h3>
        <button class="btn btn-sm btn-primary" @click="onChangeComponentClick('A')">加载A模板</button>
        <button class="btn btn-sm btn-primary" @click="onChangeComponentClick('B')">加载B模板</button>
        <button class="btn btn-sm btn-primary" @click="onChangeComponentClick('C')">加载C模板</button>
        <keep-alive><component :is="componentId">这里加载内容。。。</component></keep-alive>
        <ul class="mySummary">
            <li class="text-danger">用<code>&lt;keep-alive&gt;</code>包住<code>&lt;component&gt;</code>组件后，控制台的提示仍然在</li>
        </ul>
    </section>
</div>
<script type="text/x-template" id="app-main-view">
    <div>
        <p>
            <button class="btn btn-sm btn-primary" @click="onChangeDescClick('Android')">安卓</button>
            <button class="btn btn-sm btn-primary" @click="onChangeDescClick('Apple')">苹果</button>
            <button class="btn btn-sm btn-primary" @click="onChangeDescClick('Chrome')">谷歌</button>
            <button class="btn btn-sm btn-primary" @click="onDescFontSizeClick()">放大描述字号</button>
        </p>
        <app-desc-view :pushSubDescObj="pushSubDescObj"></app-desc-view>
    </div>
</script>
<script type="text/x-template" id="app-desc-view">
    <div>
        <h3>{{pushSubDescObj.title}}</h3>
        <div :style="{'font-size':fontSize + 'px'}">这是{{pushSubDescObj.desc}}的描述信息</div>
    </div>
</script>
<script type="text/x-template" id="app3-main-view">
    <div>
        <slot name="title"></slot>
        <slot name="time"></slot>
        <slot></slot>
    </div>
</script>
<script type="text/x-template" id="app4ComponentA">
    <div>componentA的内容……</div>
</script>
<script type="text/x-template" id="app4ComponentB">
    <div>componentB的内容……</div>
</script>
<script type="text/x-template" id="app4ComponentC">
    <div> componentC的内容……</div>
</script>
<script src="assets/js/vue-2.5.17.js"></script>
<script src="assets/js/jquery-3.3.1.js"></script>
<script src='js/common.js'></script>
<script src='js/05_component(2).js'></script>
</body>
</html>
















